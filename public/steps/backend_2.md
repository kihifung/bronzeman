## 必修課題

### 步驟 13: 網站佈署

目的：將 master 分支上的簡易任務管理系統推上線

- 試著將網站 deploy 到 Heroku 上
  - 沒有帳號的話，請建立帳號
- 看一下被推上 Heroku 的網站
  - 接下來就會在這裡建立任務並繼續開發
  - ※ 不過，推上 Heroku 後，就是在網路上公開了，請注意不要放敏感資料
    - 現階段，或許可以考慮加入 basic 認證
  - 今後，每個步驟完成後，就繼續將成品推上 Heroku
- 將佈署的方法寫進 `README.md`
  - 也將使用的 framework 版號等資料記下來

### 步驟 14: 加入結束時間

- 任務可設定結束時間
- 列表頁可以結束時間排序
- 擴充 spec
- PR/review 後佈署

### 步驟 15: 加入狀態，並且能夠查詢

- 在任務上加入狀態（待處理、進行中、完成）
  - 【選項】不是初學者的話，可以使用管理 state 的 gem
- 在列表頁面，要能夠以標題和狀態進行查詢
  - 【選項】不是初學者的話，可以使用 ransack 等 gem
- 在設定條件查詢時，請觀察 log 並確認 SQL 的變化
  - 之後的步驟也需要這麼做，請養成習慣
- 建立 search index
  - 準備一定程度的測試資料後，觀察 log/development.log 以確認加入 index 後對速度的改善
  - 【選項】使用 PostreSQL 的 explain 等功能，檢視資料庫端的 index 使用狀況
- 針對查詢功能增加 model spec（feature spec 也要擴充）

### 步驟 16: 設定優先順序

- 在任務上加入優先順序（高、中、低）
- 列表頁可依優先順序做排序
- 擴充 feature spec
- PR/review 後佈署

### 步驟 17: 增加分頁功能

- 使用 kaminari gem 在列表頁面加入分頁功能

### 步驟 18: 加入設計

- 使用 Bootstrap 4，為目前的作品套入設計
  - 【選項】自己寫 CSS 來設計

### 步驟 19: 支援多人使用

- 建立使用者 model
- 以 seed 建立第一個使用者
- 建立使用者和任務的關聯
  - 建立關聯所需的 index
  - 要避免 N+1 問題
  - ※ 推上 Heroku 時，已經建立過的任務，要和使用者建立關係（資料維護）

### 步驟 20: 登入/登出功能

- 這裡不使用任何 Gem，請自己實做
  - 不使用 devise 等便利的 Gem，是為了讓新人能更深入了解 Rails 中 HTTP cookie 和 session 的原理
  - 以及加強對一般認證機制的理解（例如密碼的處理）
- 實做登入的頁面
- 未登入時，不能進入任務管理頁面
- 請改成只能看到自己建立的任務
- 實做登出功能

### 步驟 21: 使用者管理頁面

- 在頁面上新增管理選單
- 管理頁面的網址 `/admin`
  - 在修改 `routes.rb` 之前，請想一下 URL 以及 routing name（會變成 `*_path` 的部分）要怎麼設計
- 實做使用者的列表、新增、修改、刪除等功能
- 刪除使用者後，也一併刪除該使用者的任務
- 在使用者列表頁面，顯示使用者的任務數量
- 能夠看到使用者所建立的任務列表

### 步驟 22: 為使用者加入角色

- 將使用者分為管理員和一般使用者
- 請改成只有管理員可以存取使用者管理頁面
  - 若一般使用者存取管理頁面時，需提示權限不足訊息無法存取，並轉向適當頁面
- 能在使用者管理頁面選擇角色
- 管理者只剩下一個人時，不能再被刪除
  - 利用 model 的 callback 實做
- ※ 可以自己決定是否要使用 Gem

### 步驟 23: 為任務加入標籤

- 一個任務可以設定多個的標籤
- 能夠以標籤進行搜尋

### 步驟 24: 設定錯誤頁面

- 客制化 Rails 的預設錯誤頁面
- 根據不同狀況，設定適合的錯誤頁面
  - 至少需要做 404 和 500 這兩頁
